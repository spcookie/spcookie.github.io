---
title: Linux操作手册
categories: [ 操作手册 ]
tags: [ linux ]
group: default
date: 2024-8-1
updated: 2024-8-1
comments: true
readmore: false
references:
    - title: 某篇文章
      url: https://
---

<!-- more --->

## Linux系统目录结构

![](https://spcookie.oss-cn-hangzhou.aliyuncs.com/20240801112700-2024-08-01.png)

**系统启动必须**

- /boot：存放的启动Linux 时使用的内核文件，包括连接文件以及镜像文件。
- /etc：存放所有的系统需要的配置文件和子目录列表，更改目录下的文件可能会导致系统不能启动。
- /lib：存放基本代码库（比如c++库），其作用类似于Windows里的DLL文件。几乎所有的应用程序都需要用到这些共享库。
- /sys： 这是linux2.6内核的一个很大的变化。该目录下安装了2.6内核中新出现的一个文件系统 sysfs 。sysfs文件系统集成了下面3种文件系统的信息：针对进程信息的proc文件系统、针对设备的devfs文件系统以及针对伪终端的devpts文件系统。该文件系统是内核设备树的一个直观反映。当一个内核对象被创建的时候，对应的文件和目录也在内核对象子系统中。

**指令集合**

- /bin：存放着最常用的程序和指令。
- /sbin：只有系统管理员能使用的程序和指令。

**外部文件管理**

- /dev ：Device(设备)的缩写, 存放的是Linux的外部设备。注意：在Linux中访问设备和访问文件的方式是相同的。
- /media：类windows的其他设备，例如U盘、光驱等等，识别后linux会把设备放到这个目录下。
- /mnt：临时挂载别的文件系统的，我们可以将光驱挂载在/mnt/上，然后进入该目录就可以查看光驱里的内容了。

**临时文件**

- /run：是一个临时文件系统，存储系统启动以来的信息。当系统重启时，这个目录下的文件应该被删掉或清除。
- /lost+found：一般情况下为空的，系统非法关机后，这里就存放一些文件。
- /tmp：这个目录是用来存放一些临时文件的。

**账户**

- /root：系统管理员的用户主目录。
- /home：用户的主目录，以用户的账号命名的。
- /usr：用户的很多应用程序和文件都放在这个目录下，类似于windows下的program files目录。
- /usr/bin：系统用户使用的应用程序与指令。
- /usr/sbin：超级用户使用的比较高级的管理程序和系统守护程序。
- /usr/src：内核源代码默认的放置目录。

**运行过程中要用**

- /var：存放经常修改的数据，比如程序运行的日志文件（/var/log 目录下）。
- /proc：管理内存空间，虚拟的目录，是系统内存的映射，我们可以直接访问这个目录来，获取系统信息。这个目录的内容不在硬盘上而是在内存里，我们也可以直接修改里面的某些文件来做修改。

**扩展用的**

- /opt：默认是空的，我们安装额外软件可以放在这个里面。
- /srv：存放服务启动后需要提取的数据（不用服务器就是空）

> 在Linux文件系统中有两个特殊的目录，一个用户所在的工作目录，也叫当前目录，可以使用一个点 . 来表示；另一个是当前目录的上一级目录，也叫父目录，可以使用两个点 .. 来表示。
> - . ：代表当前的目录，也可以使用 ./ 来表示；
> - .. ：代表上一层目录，也可以 ../ 来代表。
> 如果一个目录或文件名以一个点 . 开始，表示这个目录或文件是一个隐藏目录或文件(如：.bashrc)。即以默认方式查找时，不显示该目录或文件。

## Linux系统命令行的含义

```
示例：root@app:~#

root    //用户名，root为超级用户
@       //分隔符
app     //主机名称
~       //当前所在目录，默认用户目录为~，会随着目录切换而变化。
#       //表示当前用户是超级用户，普通用户为$。
```

## Linux命令

> https://www.linuxcool.com/

### 文件管理

#### mv – 移动或改名文件

`move`

**语法格式**：mv 参数 源文件名 目标文件名

**常用参数**：

- -b 覆盖前为目标文件创建备份
- -v 显示执行过程详细信息
- -f 强制覆盖目标文件而不询问
- -Z 设置文件安全上下文
- -i 覆盖目标文件前询问用户是否确认
- -n 不要覆盖已有文件
- -u 当源文件比目标文件更新时，才执行覆盖操作

#### ls – 显示目录中文件及其属性信息

`list`

**语法格式**：ls 参数 文件名

**常用参数**：

- -a 显示所有文件及目录
- -r 依据首字母将文件以相反次序显示
- -A 不显示当前目录和父目录
- -R 递归显示所有子文件
- -d 显示目录自身的属性信息
- -S 依据内容大小将文件排序显示
- -i 显示文件的inode属性信息
- -t 依据最后修改时间将文件排序显示
- -l 显示文件的详细属性信息
- -X 依据扩展名将文件排序显示
- -m 以逗号为间隔符，水平显示文件信息
- -color 以彩色显示信息

#### cp – 复制文件或目录

`copy`

**语法格式**：cp 参数 源文件名 目标文件名

**常用参数**：

- -a 功能等价于pdr参数组合
- -l 对源文件建立硬链接，而非复制文件
- -b 覆盖目标文件前先进行备份
- -p 保留源文件或目录的所有属性信息
- -d 复制链接文件时，将目标文件也建立为链接文件
- -r 递归复制所有子文件
- -f 若目标文件已存在，则会直接覆盖
- -s 对源文件建立软链接，而非复制文件
- -i 若目标文件已存在，则会询问是否覆盖
- -v 显示执行过程详细信息

#### mkdir – 创建目录文件

`make directories`

**语法格式**: mkdir 参数 目录名

**常用参数**：

- -m 创建目录的同时设置权限
- -v 显示执行过程详细信息
- -p 递归创建多级目录
- -z 设置目录安全上下文

#### pwd – 显示当前工作目录的路径

`print working directory`

**语法格式**：pwd 参数

**常用参数**：

- -L 显示逻辑路径
- --version 显示版本信息
- -P 显示实际物理地址
- --help 显示帮助信息

#### tar – 压缩和解压缩文件

**语法格式**：tar 参数 压缩包名 文件或目录名

**常用参数**：

- -A 添加文件到已存在的压缩包
- -p 保留原来的文件权限与属性
- -P 使用绝对路径
- -c 创建新的压缩
- -t 显示压缩包的内容
- -C 解压缩到指定目录
- -u 更新压缩包内的文件
- -d 记录文件的差别
- -v 显示执行过程详细信息
- -f 指定压缩包文件
- -w 确认压缩包的完整性
- -j 使用bzip2压缩格式
- -x 从压缩包内提取文件
- -z 使用gzip压缩格式
- -m 保护文件不被覆盖
- --exclude 排除指定的文件不压缩
- -N 只将较新日期的文件保存到压缩包中
- --remove-files 操作完成后删除源文件

**参考示例**:

使用gzip压缩格式对指定目录进行打包操作，显示压缩过程，压缩包规范后缀为.tar.gz

```sh
tar -czvf File.tar.gz /etc
```

将当前工作目录内所有以.cfg为后缀的文件打包，不进行压缩

```sh
tar -cvf File.tar *.cfg
```

将当前工作目录内所有以.cfg为后缀的文件打包，不进行压缩，并删除原始文件

```sh
tar --cvf File.tar *.cfg --remove-files
```

解压指定压缩包到当前工作目录

```sh
tar -xvf File.tar
```

解压指定压缩包到/etc目录

```sh
tar -xvf File.tar -C /etc
```

查看某个压缩包内文件信息（无须解压）

```sh
tar -tvf File.tar
```

#### cd – 切换目录

`change directory`

**语法格式**：cd 参数 目录名

**常用参数**：

- -L 切换至符号链接所在的目录
- ~ 切换至用户家目录
- -P 切换至符号链接对应的实际目录
- .. 切换至当前位置的上一级目录
- -- 切换至上次所在目录

#### chmod – 改变文件或目录权限

`change mode`

**语法格式**：chmod 参数 权限设定字串 文件名

**常用参数**：

- -c 改变权限成功后再输出成功信息
- --no-preserve-root 不特殊对待根目录
- -f 改变权限失败后不显示错误信息
- --preserve-root 禁止对根目录进行递归操作
- -R 递归处理所有子文件
- --reference 使用指定参考文件的权限
- -v 显示执行过程详细信息

**权限设定字串**

权限设定字串，格式如下:

```
[ugoa...][[+-=][rwxX]...][,...]
```

Linux/Unix 的文件调用权限分为三级: 文件所有者（Owner）、用户组（Group）、其它用户（Other Users）。

![](https://spcookie.oss-cn-hangzhou.aliyuncs.com/20240801144130-2024-08-01.png)

只有**文件所有者**和**超级用户**可以修改文件或目录的权限。可以使用绝对模式（八进制数字模式），符号模式指定文件的权限。

![](https://spcookie.oss-cn-hangzhou.aliyuncs.com/20240801144201-2024-08-01.png)

其中：

- u 表示该文件的拥有者，g 表示与该文件的拥有者属于同一个群体(group)者，o 表示其他以外的人，a 表示这三者皆是。
- \+ 表示增加权限、- 表示取消权限、= 表示唯一设定权限。
- r 表示可读取，w 表示可写入，x 表示可执行，X 表示只有当该文件是个子目录或者该文件已经被设定过为可执行。

**符号模式**

使用符号模式可以设置多个项目：who（用户类型），operator（操作符）和 permission（权限），每个项目的设置可以用逗号隔开。 命令 chmod 将修改 who 指定的用户类型对文件的访问权限，用户类型由一个或者多个字母在 who 的位置来说明。

who 的符号模式表所示:

| who  | 用户类型 | 说明                 |
| :--- | :------- | :------------------- |
| u    | user     | 文件所有者           |
| g    | group    | 文件所有者所在组     |
| o    | others   | 所有其他用户         |
| a    | all      | 所有用户, 相当于 ugo |

operator 的符号模式表：

| Operator | 说明                                                   |
| :------- | :----------------------------------------------------- |
| +        | 为指定的用户类型增加权限                               |
| -        | 去除指定用户类型的权限                                 |
| =        | 设置指定用户权限的设置，即将用户类型的所有权限重新设置 |

permission 的符号模式表:

| 模式 | 名字         | 说明                                                                           |
| :--- | :----------- | :----------------------------------------------------------------------------- |
| r    | 读           | 设置为可读权限                                                                 |
| w    | 写           | 设置为可写权限                                                                 |
| x    | 执行权限     | 设置为可执行权限                                                               |
| X    | 特殊执行权限 | 只有当文件为目录文件，或者其他类型的用户有可执行权限时，才将文件权限设置可执行 |
| s    | setuid/gid   | 当文件被执行时，根据who参数指定的用户类型设置文件的setuid或者setgid权限        |
| t    | 粘贴位       | 设置粘贴位，只有超级用户可以设置该位，只有文件所有者u可以使用该位              |

**八进制语法**

文件或目录的权限位是由9个权限位来控制，每三位为一组，它们分别是文件所有者（User）的读、写、执行，用户组（Group）的读、写、执行以及其它用户（Other）的读、写、执行。

| #    | 权限           | rwx  | 二进制 |
| :--- | :------------- | :--- | :----- |
| 7    | 读 + 写 + 执行 | rwx  | 111    |
| 6    | 读 + 写        | rw-  | 110    |
| 5    | 读 + 执行      | r-x  | 101    |
| 4    | 只读           | r--  | 100    |
| 3    | 写 + 执行      | -wx  | 011    |
| 2    | 只写           | -w-  | 010    |
| 1    | 只执行         | --x  | 001    |
| 0    | 无             | ---  | 000    |

